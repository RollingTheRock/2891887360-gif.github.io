{% assign featured_projects = site.projects | where: "featured", true | limit: 3 %}

{% if featured_projects.size > 0 %}
<section class="home-projects">
  <div class="container-wide">
    <div class="section-header">
      <h2 class="section-title">精选项目</h2>
      <a href="{{ '/projects/' | relative_url }}" class="section-link">查看全部 →</a>
    </div>

    <div class="projects-grid">
      {% for project in featured_projects %}
      <article class="project-card">
        <a href="{{ project.url | relative_url }}" class="project-link">
          {% if project.image %}
          <div class="project-image">
            <img src="{{ project.image | relative_url }}" alt="{{ project.title }}" loading="lazy">
          </div>
          {% endif %}

          <div class="project-content">
            <h3 class="project-title">{{ project.title }}</h3>
            <p class="project-desc">{{ project.description | truncate: 80 }}</p>

            {% if project.tech %}
            <div class="project-tech">
              {% for t in project.tech limit: 3 %}
              <span>{{ t }}</span>
              {% endfor %}
            </div>
            {% endif %}
          </div>
        </a>
      </article>
      {% endfor %}
    </div>
  </div>
</section>
{% endif %}
