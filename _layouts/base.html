<!DOCTYPE html>
<html lang="{{ site.lang | default: 'zh-CN' }}" data-mode="{{ site.theme_mode | default: 'light' }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title }}{% if page.title %} - {% endif %}{{ site.title }}</title>
  <meta name="description" content="{{ page.description | default: site.description }}">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Noto+Serif+SC:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <a href="{{ '/' | relative_url }}" class="site-logo">{{ site.social.name }}</a>

    <nav class="site-nav">
      <a href="{{ '/blog/' | relative_url }}">Blog</a>
      <a href="{{ '/projects/' | relative_url }}">Projects</a>
      <a href="{{ '/about/' | relative_url }}">About</a>

      <button class="theme-toggle" id="theme-toggle" aria-label="切换主题">
        <svg class="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
        <svg class="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      </button>
    </nav>
  </header>

  <!-- Main -->
  <main class="main-content">
    {{ content }}
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container-wide footer-container">
      <div class="footer-brand">
        <span class="footer-name">{{ site.social.name }}</span>
        <span class="footer-tagline">{{ site.tagline }}</span>
      </div>
      <div class="footer-links">
        <a href="{{ '/blog/' | relative_url }}">Blog</a>
        <a href="{{ '/projects/' | relative_url }}">Projects</a>
        <a href="{{ '/about/' | relative_url }}">About</a>
        {% if site.github.username %}
        <a href="https://github.com/{{ site.github.username }}" target="_blank">GitHub</a>
        {% endif %}
      </div>
      <div class="footer-copyright">
        © {{ site.time | date: '%Y' }} {{ site.social.name }}
      </div>
    </div>
  </footer>

  <script>
    // Theme toggle
    const toggle = document.getElementById('theme-toggle');
    const html = document.documentElement;

    function getTheme() {
      return localStorage.getItem('theme') ||
        (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    }

    function setTheme(theme) {
      html.setAttribute('data-mode', theme);
      localStorage.setItem('theme', theme);
    }

    setTheme(getTheme());

    toggle?.addEventListener('click', () => {
      setTheme(html.getAttribute('data-mode') === 'dark' ? 'light' : 'dark');
    });
  </script>
</body>
</html>
